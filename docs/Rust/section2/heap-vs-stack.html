<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Polkadot Education Initiative Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Polkadot Education Initiative Blog Atom Feed"><title data-react-helmet="true">The Heap vs. The Stack | Polkadot Education Initiative</title><meta data-react-helmet="true" property="og:url" content="https://education.web3.foundation//docs/Rust/section2/heap-vs-stack"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="The Heap vs. The Stack | Polkadot Education Initiative"><meta data-react-helmet="true" name="description" content="Learn the summarized differences between the stack and the heap and how they affect your Rust programming."><meta data-react-helmet="true" property="og:description" content="Learn the summarized differences between the stack and the heap and how they affect your Rust programming."><link data-react-helmet="true" rel="shortcut icon" href="/img/Web3Foundation.png"><link data-react-helmet="true" rel="canonical" href="https://education.web3.foundation//docs/Rust/section2/heap-vs-stack"><link data-react-helmet="true" rel="alternate" href="https://education.web3.foundation//docs/Rust/section2/heap-vs-stack" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://education.web3.foundation//docs/Rust/section2/heap-vs-stack" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.0361edd9.css">
<link rel="preload" href="/assets/js/runtime~main.a66026dc.js" as="script">
<link rel="preload" href="/assets/js/main.bcf43bf2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/Web3Foundation.png" alt="Polkadot Education Initiative" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/Web3Foundation.png" alt="Polkadot Education Initiative" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Technical Education</b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__item navbar__link">Courses</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/introblock">Blockchain</a></li><li><a class="dropdown__link" href="/docs/introdot">Polkadot</a></li><li><a class="dropdown__link" href="/docs/introrust">Rust Programming</a></li><li><a class="dropdown__link" href="/docs/introsubstrate">Substrate</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__item navbar__link">Resources</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/introatoz">A - Z ELI5 series </a></li><li><a href="https://wiki.polkadot.network/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Polkadot Wiki</a></li><li><a class="dropdown__link" href="/docs/polkadotFAQ">Polkadot FAQ </a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/w3f/w3f-education" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Rust/rust-appendix">Course Appendix</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/introrust">Course Syllabus</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Why Rust?</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installation &amp; Development Environment Setup</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Rust 101 - Intro to Basic Rust</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Rust/section2/section-2-intro">Intro to Basic Rust</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Rust/section2/variables-mutability">Variables &amp; Mutability</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/Rust/section2/heap-vs-stack">The Heap vs. The Stack</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Rust/section2/data-types">Data Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Rust/section2/functions-comments">Functions &amp; Comments</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Rust/section2/loops">Loops &amp; Basic Logic Flows</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Intro to Intermediate Rust: Ownership, Borrowing, &amp; Slices</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Intro to Intermediate Rust: Enums &amp; Matching Patterns</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Intro to Intermediate Rust: Data Structs &amp; Collections</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Intro to Advanced Rust: Traits, Generics, &amp; Lifetimes</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Intro to Advanced Rust: Iterators &amp; Closures</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Learning Cargo, Rustâ€™s Package Management	 System, Basic Testing</a></li><li class="menu__list-item"><a href="https://www.rust-lang.org/" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Learn more<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_dC7a">The Heap vs. The Stack</h1></header><p>Throughout this course, a common occurrence presented is the notion of &quot;putting&quot; variables on either the <strong>stack</strong> or the <strong>heap</strong>.  This page provides a summary as to what each is and how they relate to programming in Rust.  Low-level languages have to be concerned with memory management and allocation.  This concept should be familiar if you&#x27;re coming from a language like C or C++.  </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="what-do-the-stack-and-heap-represent"></a>What do the stack and heap represent?<a class="hash-link" href="#what-do-the-stack-and-heap-represent" title="Direct link to heading">#</a></h2><p>The stack and heap are memory management and allocation concepts.  They relate to how memory in any program is managed, accessed and whether or not it can be changed in the runtime.  The stack and heap are two common methods to accomplish a program&#x27;s memory management and allocation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="the-stack"></a>The Stack<a class="hash-link" href="#the-stack" title="Direct link to heading">#</a></h2><p>The stack is a linear model of storing objects on a &quot;stack.&quot;  It is faster than the heap but cannot be modified as easily.  Objects are pushed and popped to and from the stack accordingly.  In Rust, items that are of known size are stored on the stack.  Known size in this context refers to some value that can be calculated at compile time, for example: </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">let hello = &quot;Hello, World&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// or</span></span><span class="token-line" style="color:#393A34"><span class="token plain">let x = 10;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Both <code>hello</code> and <code>x</code> are pushed onto the stack because they are known in size, meaning their memory profile can be determined at compile time because their contents are defined preemptively.  </p><p>In Rust, the stack is the default for managing primitive/basic values, call frames and local variables.  Non-primitives can also be put on the stack, but this is dependent on their lifetime and usage (i.e., a <code>struct</code> that has elements of known size).  The stack itself also has a limited size, hence why the stack can overflow if too much memory is allocated to it.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="the-heap"></a>The Heap<a class="hash-link" href="#the-heap" title="Direct link to heading">#</a></h2><p>The heap refers to a dynamically managed, hierarchical model of storing objects.  It is slower than the stack but provides a way to store larger amounts of data for modification at a later time in memory.  Objects stored on the heap are typically not known in size at compile time, meaning they have the potential to grow and shrink as needed.  Rust has many mechanisms to manage this memory safely and avoid problems such as data races or dangling pointers.</p><p>In Rust, data structures such as <code>Vec</code> and <code>String</code> utilize the heap, which can grow and shrink within the runtime.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// A vector in Rust, the Rust equivalent to an array</span></span><span class="token-line" style="color:#393A34"><span class="token plain">let vector_of_numbers = vec![0, 1, 2];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Change this in the runtime!</span></span><span class="token-line" style="color:#393A34"><span class="token plain">modify_vec(vector_of_numbers); // [0, 1, 2, 3]</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// A growable, shrinkable &quot;String.&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">let hello_string = String::from(&quot;Hello, World&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">hello_string.push(&#x27;!&#x27;); // Adds an ! to hello_string</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="when-to-use-which--how-is-this-used-in-rust"></a>When to use which?  How is this used in Rust?<a class="hash-link" href="#when-to-use-which--how-is-this-used-in-rust" title="Direct link to heading">#</a></h2><p>In Rust, this memory management and allocation is handled for you. There is no special syntax to dictate this in Rust, as it is already a part of the language.  As you progress, you will learn how Rust efficiently manages memory through the ownership and borrowing systems while providing low-level access.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/w3f/w3f-education/edit/main/docs/Rust/section2/heap-vs-stack.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_wj+Z">Last updated on <b><time datetime="2023-06-02T15:18:33.000Z">6/2/2023</time></b> by <b>Bader Youssef</b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/Rust/section2/variables-mutability"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Variables &amp; Mutability</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/Rust/section2/data-types"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Data Types Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-do-the-stack-and-heap-represent" class="table-of-contents__link">What do the stack and heap represent?</a></li><li><a href="#the-stack" class="table-of-contents__link">The Stack</a></li><li><a href="#the-heap" class="table-of-contents__link">The Heap</a></li><li><a href="#when-to-use-which--how-is-this-used-in-rust" class="table-of-contents__link">When to use which?  How is this used in Rust?</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Courses</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/introblock">Blockchain Fundamentals</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/introdot">Introduction to Polkadot</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/introrust">Introduction to Rust Programming</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/introsubstrate">Introduction to Substrate</a></li></ul></div><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items"><li class="footer__item"><a href="https://wiki.polkadot.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://web3.foundation/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/Web3foundation" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/w3f/w3f-education" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Web3 Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a66026dc.js"></script>
<script src="/assets/js/main.bcf43bf2.js"></script>
</body>
</html>