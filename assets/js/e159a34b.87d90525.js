"use strict";(self.webpackChunkw3f_education=self.webpackChunkw3f_education||[]).push([[30],{3905:function(e,t,o){o.d(t,{Zo:function(){return d},kt:function(){return h}});var n=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},d=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(o),h=r,m=p["".concat(l,".").concat(h)]||p[h]||u[h]||a;return o?n.createElement(m,i(i({ref:t},d),{},{components:o})):n.createElement(m,i({ref:t},d))}));function h(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,i=new Array(a);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<a;c++)i[c]=o[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}p.displayName="MDXCreateElement"},5238:function(e,t,o){o.r(t),o.d(t,{contentTitle:function(){return l},default:function(){return p},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return d}});var n=o(7462),r=o(3366),a=(o(7294),o(3905)),i=["components"],s={id:"networking"},l="Networking",c={unversionedId:"Polkadot/Module4/networking",id:"Polkadot/Module4/networking",isDocsHomePage:!1,title:"Networking",description:"All validators have their own local clock and their clocks do",source:"@site/docs/Polkadot/Module4/networking.md",sourceDirName:"Polkadot/Module4",slug:"/Polkadot/Module4/networking",permalink:"/docs/Polkadot/Module4/networking",editUrl:"https://github.com/w3f/w3f-education/edit/main/docs/Polkadot/Module4/networking.md",version:"current",lastUpdatedBy:"Radha",lastUpdatedAt:1654881714,formattedLastUpdatedAt:"6/10/2022",frontMatter:{id:"networking"},sidebar:"polkadot",previous:{title:"Cryptography",permalink:"/docs/Polkadot/Module4/cryptography"},next:{title:"Nodes on Polkadot Network",permalink:"/docs/Polkadot/Module4/nodes"}},d=[{value:"Gossipping",id:"gossipping",children:[]},{value:"Networking Complexity",id:"networking-complexity",children:[]}],u={toc:d};function p(e){var t=e.components,o=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,n.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"networking"},"Networking"),(0,a.kt)("p",null,"All validators have their own local clock and their clocks do\nnot rely on any central clock. We assume that validators and collators are in a partially synchronous\nnetwork. It means that a message sent by a validator or a collator arrives at all parties in the\nnetwork at most ",(0,a.kt)("em",{parentName:"p"},"d")," units of time later where ",(0,a.kt)("em",{parentName:"p"},"d")," is an unknown parameter. So, we assume an\neventual delivery of a message in Polkadot."),(0,a.kt)("p",null,"Polkadot's networking needs to extend the peer-to-peer gossip network that is standard in single chain\npermissionless blockchains to a multi-chain system, where any nodes network traffic should not scale\nwith the total data of the system."),(0,a.kt)("h2",{id:"gossipping"},"Gossipping"),(0,a.kt)("p",null,"This subprotocol is used for most relay-chain artefacts, where everyone needs to see more-or-less\nthe same public information. Part of its structure is also used for when a node goes o\u2000ine for a\nlong time and needs to synchronise any newer data it hasn't seen before.\nThe Polkadot relay chain network forms a gossip overlay network on top of the physical commu-\nnications network, as an e\u2000cient way to provide a decentralised broadcast medium. The network\nconsists of a known number of trusted nodes (validators) who have been permissioned via staking,\nand an unknown number of untrusted nodes (full nodes that don't perform validation) from the\npermissionless open internet. (As an aside, recall that some of the untrusted nodes may have other\nroles as de\u2000ned earlier, e.g. parachain collator, \u2000shermen, etc.)\nA simple push-based approach is implemented currently, with hash-based tracker caches to\navoid sending duplicates to peers, and a few restrictions to avoid the most common spam attacks:\n\u2000 Artefacts may only be received in dependency order; peers are not allowed to send them out-\nof-order. Though this decreases network-level e\u2000ciency, it is straightforward to implement\nand provides a healthy level of security."),(0,a.kt)("p",null,"\u2000 To e\u2000ciently communicate to sending peers what they are allowed to send in dependency\norder, periodically peers update each other with their view of the latest heads of the chain.\nThere are also more speci\u2000c constraint rules applied to artefacts belonging to the various higher-\nlevel subprotocols using the gossip protocol, to avoid broadcasting obsolete or otherwise unneeded\nartefacts. For example, for GRANDPA we only allow two votes being received for each type of\nvote, round number, and voter; any further votes will be ignored. For block production only valid\nblock producers are allowed to produce one block per round; any further blocks will be ignored.\nThere is basic support for sentry nodes, proxy servers that are essentially the only neighbour\nof a private server, running more security-critical operations such the validator role.\nThe network topology is a weak point currently; nodes connect to each other on an ad-hoc\nbasis by performing random lookups in the address book. Further work will proceed along two\nfronts:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Trusted nodes will reserve a portion of their bandwidth and connection resources, to form\na structured overlay with a deterministic but unpredictable topology that rotates every era.\nFor nodes running behind sentries, this e\u2000ectively means that their sentry nodes instead\nparticipate in this topology."),(0,a.kt)("li",{parentName:"ol"},"For the remainder of trusted nodes' resource capacity, and for the whole of untrusted nodes'\nresource capacity, they will select neighbours via a scheme based on latency measurements,\nwith the details to be decided. Notably, for good security properties we want a scheme that\ndoes not simply choose \"closest \u2000rst\", but also some far links as well.\nIn some sense, this can be viewed as the trusted nodes forming a core with the untrusted\nnodes around it - but note that trusted nodes are expected to use some of their resources to serve\nuntrusted nodes as well. Both topologies are chosen to mitigate eclipse attacks, as well as sybil\nattacks in the permissionless untrusted case.\nFurther work will also include some sort of set reconciliation protocol, to further reduce re-\ndundancy when many senders attempt to send the same object to the same recipient at once; and\npotentially look into lifting the dependency-order restriction whilst retaining security.")),(0,a.kt)("h2",{id:"networking-complexity"},"Networking Complexity"),(0,a.kt)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/yvlUBL1GNdk",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}))}p.isMDXComponent=!0}}]);